<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AI Marketing News｜AIニュース・解説</title>
    <meta name="description" content="AIMAメディア｜生成AI・AIマーケの最新ニュースと解説。">
    <link rel="canonical" href="https://ai-and-marketing.jp/media/" />
    <meta property="og:type" content="website">
    <meta property="og:title" content="AI Marketing News｜AIニュース・解説">
    <meta property="og:description" content="生成AI・AIマーケの最新ニュースと実務解説。">
    <meta property="og:url" content="https://ai-and-marketing.jp/media/">
    <meta property="og:image" content="https://ai-and-marketing.jp/media/ogp.png">
    <meta name="twitter:card" content="summary_large_image">
  </head>
  <body>
    <div id="root"></div>
    <section id="cms-latest"><h2>最新記事</h2><ul id="cms-list"></ul></section>
    <script>
    (async () => {
      const ul = document.getElementById('cms-list');
      try {
        const r = await fetch('./api/articles?limit=10'); // ← /media/api/... へ → CMSにRewrite
        const rows = await r.json();
        if (!Array.isArray(rows) || rows.length === 0) {
          ul.innerHTML = '<li>まだ記事がありません。</li>'; return;
        }
        const fmt = new Intl.DateTimeFormat('ja-JP', { dateStyle:'medium', timeStyle:'short' });
        ul.innerHTML = rows.map(a => `
          <li>
            <a href="./article.html?id=${encodeURIComponent(a.id)}">${a.title}</a>
            <small>${a.created_at ? fmt.format(new Date(a.created_at)) : ''}</small>
          </li>`).join('');
      } catch(e) {
        ul.innerHTML = '<li style="color:red">記事の取得に失敗しました</li>';
      }
    })();
    </script>
  </body>
</html>
