<!doctype html><html lang="ja"><meta charset="utf-8"><title>Articles</title>
<body><h1>Articles</h1><ul id="list"></ul>
<script>
  const fmt = new Intl.DateTimeFormat('ja-JP', { dateStyle: 'medium', timeStyle: 'short' });
  fetch('./api/articles?limit=20').then(r=>r.json()).then(data=>{
    const rows = Array.isArray(data) ? data : (data && Array.isArray(data.rows) ? data.rows : []);
    const ul=document.getElementById('list');
    ul.innerHTML=rows.map(a=>{
      const when = fmt.format(new Date(a.created_at));
      return `<li data-id="${a.id}">
                <a href="./article.html?id=${a.id}"><b>${a.title}</b></a>
                <small>${when}</small>
              </li>`;
    }).join('');
  }).catch(e=>alert('fetch error: '+e));
</script></body></html>
